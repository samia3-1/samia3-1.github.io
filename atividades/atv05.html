<head>
  <title>Escola Virtual</title>
  <style>
    .input-erro {
  border-color: #d32f2f !important;
  background-color: #ffebee;
}

    .mensagem-erro {
  display: none;
  color: #d32f2f;
  font-size: 0.85rem;
  font-weight: bold;
  margin-bottom: 5px;
  grid-column: 2;
}

    .mensagem-erro.ativo {
  display: block;
  animation: apareSuave 0.3s ease-in-out;
}

    #tela-sucesso {
  display: none;
  text-align: center;
  padding: 50px 20px;
}

.icone-sucesso {
  font-size: 80px;
  color: #43a047;
  margin-bottom: 20px;
}
  </style>
</head>
<body>
<div class='container'>

 <div id='tela-formulario'> 
  <h1>Escola Virtual</h1>
  <h2>Formulário de Pré-Matrícula</h2>

  <form id='form-matricula' novalidate>
    <fieldset>
      <legend>Dados Pessoais</legend>
      <div class='form-grid'>

        <label>Nome do Aluno:</label>
        <input type='text' id='nomeAluno' placeholder='Nome Completo'>
      <div class='mensagem-erro' id='erro-nomeAluno'>Digite o nome completo (mínimo 2 termos).</div>

        <label>Nascimento:</label>
       <div class='input-group'> 
        <input style='width: 50px;' type='text' class='pequeno' id='nascDia' placeholder='Dia'>
        <span>/</span>
        <input style='width: 50px;' type='text' class='pequeno' id='nascMes' placeholder='Mês'>
        <span>/</span>
        <input style='width: 50px;' type='text' class='pequeno' id='nascAno' placeholder='Ano' >
      </div>
      <div class='mensagem-erro' id='erro-data'>Data inválida (Ex: 31/02 não existe).</div>

     
        <label>Nome do Pai:</label>
        <input type='text' id='nomePai' placeholder='Nome e Sobrenome'>
        <div class='mensagem-erro' id='erro-nomePai'>Digite o nome completo do pai.</div>
      
        <label>Nome da Mãe:</label>
        <input type='text' id='nomeMae' placeholder='Nome e Sobrenome'>
        <div class='mensagem-erro' id='erro-nomeMae'>Digite o nome do completo da mãe.</div>
      
        <label>Telefone:</label>
        <div class='input-group'>
          <input type='number' id='telDDD' class='input-pequeno' placeholder='DDD'>
          <input type='number' id='telNumero' class='input-medio' placeholder='Ex: (99) 99999-9999'>
          <span style='font-size: 0.8rem; margin-left: 10px;'>Ramal:</span>
          <input type='number' id='telRamal' class='input-pequeno' placeholder='Ex: (Op)'>
        </div>
      <div class='mensagem-erro' id='erro-telefone'>DDD inválido ou telefone incompleto.</div>

        <label>Email:</label>
        <input id='email' placeholder='Ex: seunome@gmail.com'>
        <div class='mensagem-erro' id='erro-email'>O email deve ter @ (Arroba) e . (ponto final)</div>
        
      </div>
    </fieldset>
    
    <fieldset>
      <legend>Informações de Matrícula</legend>
      <div class='form-grid'>

          <label>Série:</label>
            <select id='serie'>
              <option value='' disabled selected>Selecione...</option>
              <option value='pre'>Pré-escolar</option>
              <option value='1ano'>1° Ano</option>
              <option value='2ano'>2° Ano</option>
              <option value='3ano'>3° Ano</option>
            </select>
        <div class='mensagem-erro' id='erro-serie'>Selecione uma série.</div>
        
          <label>Turno:</label>
          <div style='display: flex; gap: 20px'>
            <label class='label-opcao'><input type='radio' name='turno' value='manha'> Manhã</label>
            <label class='label-opcao'><input type='radio' name='turno' value='tarde'> Tarde</label>
          </div>
          <div class='mensagem-erro' id='erro-turno'>Selecione um turno.</div>

          <label>Atividades Extracurrículares:<br><span style='font-size: 0.7rem; font-weight: normal'>(Máx. 3)</span></label>
          <div class='grid-opcoes'>
            <label class='label-opcao'><input type='checkbox' class='check-atv' value='info'> Informática</label>
            <label class='label-opcao'><input type='checkbox' class='check-atv' value='musica'> Música</label>
            <label class='label-opcao'><input type='checkbox' class='check-atv' value='balet'> Balet</label>
            <label class='label-opcao'><input type='checkbox' class='check-atv' value='pintura'> Pintura</label>
            <label class='label-opcao'><input type='checkbox' class='check-atv' value='judo'> Judô</label>
            <label class='label-opcao'><input type='checkbox' class='check-atv' value='futebol'> Futebol</label>
          </div>
        </div>
    </fieldset>

    <div class='botoes-container'>
      <button type='submit'>Matricular Aluno</button>
      <button type='reset' class='btn-reset'>Limpar Matrícula</button>
    </div>  
  </form>
 </div>

 <div id='tela-sucesso'>
   <div class='icone-sucesso'>✓</div>
   <h1 style='color: #43a047;'>Sucesso!</h1>
   <p style='font-size: 1.2rem; color: #555;'>O cadastro do aluno foi realizado com sucesso.</p>
   <button onClick='location.reload()' style='margin-top: 30px; background-color: #43a047;'>Novo Cadastro</button>
 </div>

</div>
  <script>
    const form = document.getElementById('form-matricula');
const checksAtividades = document.querySelectorAll('.check-atv');
const dddsValidos = [11,12,13,14,15,16,17,18,19,21,22,24,27,28,31,32,33,34,35,37,38,41,42,43,44,45,46,47,48,49,51,53,54,55,61,62,64,63,65,66,67,68,69,71,73,74,75,77,79,81,87,82,83,84,85,88,86,89,91,93,94,92,97,95,96,98,99];

checksAtividades.forEach(check => {
  check.addEventListener('change', function() {
    const quantosMarcados = document.querySelectorAll('.check-atv:checked').length;
    if (quantosMarcados > 3) {
      this.checked = false;
      alert('Atenção: O limite é de 3 atividades extracurriculares.');
    }
  });
});

function mostrarErro(idElemento, idMensagem, mostrar) {
  const elemento = document.getElementById(idElemento);
  const msg = document.getElementById(idMensagem);

  if (!elemento || !msg) {
    console.error('ERRO DE CÓDIGO: ID não encontrado ->', idInput, idMensagem);
    return true;
  }

  if (mostrar) {
    elemento.classList.add('input-erro');
    msg.classList.add('ativo');
    return false;
  } else {
    elemento.classList.remove('input-erro');
    msg.classList.remove('ativo');
    return true;
  }
} 

form.addEventListener('submit', function(e) {
  e.preventDefault();
  let formularioValido = true;

  const validaNome = (idInput, idMsg) => {
    const elemento = document.getElementById(idInput);
    if(!elemento) return false;
    
    const valor = document.getElementById(idInput).value.trim();
    const termos = valor.split(/\s+/).filter(t => t.length > 0);

    const temErroNoNome = termos.length < 2;
    
    return mostrarErro(idInput, idMsg, termos.length < 2);
  };

  if (!validaNome('nomeAluno', 'erro-nomeAluno')) formularioValido = false;
  if (!validaNome('nomeMae', 'erro-nomeMae')) formularioValido = false;
  if (!validaNome('nomePai', 'erro-nomePai')) formularioValido = false; 

  const emailValor = document.getElementById('email').value;
  const emailValido = emailValor.includes('@') && emailValor.includes('.');
  if (!mostrarErro('email', 'erro-email', !emailValido)) formularioValido = false;

  const dia = parseInt(document.getElementById('nascDia').value);
  const mes = parseInt(document.getElementById('nascMes').value);
  const ano = parseInt(document.getElementById('nascAno').value);
  const msgData = document.getElementById('erro-data');

  const dataObj = new Date(ano, mes - 1, dia);
  const dataReal = (dataObj.getFullYear() === ano && (dataObj.getMonth() + 1) === mes && dataObj.getDate() === dia);

  if (!dataReal || ano < 1900 || ano > 2025) {
    document.getElementById('nascDia').classList.add('input-erro');
    document.getElementById('nascMes').classList.add('input-erro');
    document.getElementById('nascAno').classList.add('input-erro');
    msgData.classList.add('ativo');
    formularioValido = false;
  } else {
    document.getElementById('nascDia').classList.remove('input-erro');
    document.getElementById('nascMes').classList.remove('input-erro');
    document.getElementById('nascAno').classList.remove('input-erro');
    msgData.classList.remove('ativo');
  }

    const ddd = parseInt(document.getElementById('telDDD').value);
    const tel = document.getElementById('telNumero').value;
    const dddValido = dddsValidos.includes(ddd);
    const telPreenchido = tel.length >= 8;

    if (!mostrarErro('telNumero', 'erro-telefone', (!dddValido || !telPreenchido))) {
      document.getElementById('telDDD').classList.add('input-erro');
      formularioValido = false;
  } else {
      document.getElementById('telDDD').classList.remove('input-erro');
  }

    if (document.getElementById('serie').value === '') {
      mostrarErro('serie', 'erro-serie', true);
      formularioValido = false;
  } else {
      mostrarErro('serie', 'erro-serie', false);
  }

    const turnoMarcado = document.querySelector('input[name="turno"]:checked');
    const msgTurno = document.getElementById('erro-turno');
    if (!turnoMarcado) {
      msgTurno.classList.add('ativo');
      formularioValido = false;
  } else {
      msgTurno.classList.remove('ativo');
  }

    if (formularioValido) {
      document.getElementById('tela-formulario').style.display = 'none';
      document.getElementById('tela-sucesso').style.display = 'block';
  } else {
      window.scrollTo({ top: 0, behavior: 'smooth' });
  } 
});
  </script>
</body>

