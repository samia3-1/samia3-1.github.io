<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/jpg" href="img/favicon.ico"/>
    <title>Robotron 2000</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@300;500&display=swap" rel="stylesheet"> 
</head>
<body>
    <main>
        <section class="robotron">
            <img class="robo" src="img/robotron.png" alt="Robotron">
            <figcaption class="titulo">ROBOTRON <br>2000</figcaption>
        </section>

        <section class="box estatisticas">
            <div class="estatistica">
                <p class="estatistica-titulo">Força</p>
                <div class="estatistica-valor">
                    <p class="estatistica-numero">768</p>
                </div>
            </div>
            <div class="estatistica">
                <p class="estatistica-titulo">Poder</p>
                <div class="estatistica-valor">
                    <p class="estatistica-numero">630</p>
                </div>
            </div>
            <div class="estatistica">
                <p class="estatistica-titulo">Energia</p>
                <div class="estatistica-valor">
                    <p class="estatistica-numero">289</p>
                </div>
            </div>
            <div class="estatistica">
                <p class="estatistica-titulo">Velocidade</p>
                <div class="estatistica-valor">
                    <p class="estatistica-numero">597</p>
                </div>
            </div>
        </section>

        <section class="equipamentos">
            <form action="" class="montador">
                <div class="box montador-conteudo">
                    <div class="peca">
                        <label for="" class="peca-titulo">Braços</label>
                        <div class="controle">
                            <button type='button' data-controle='-' data-peca='braco' class="controle-ajuste">-</button>
                            <input type="text" class="controle-contador" value="00" data-contador readonly>
                            <button type='button' data-controle='+' data-peca='braco' class="controle-ajuste">+</button>
                        </div>
                    </div>
                    <hr class="linha">
                    <div class="peca">
                        <label for="" class="peca-titulo">Blindagem</label>
                        <div class="controle">
                            <button type='button' data-controle='-' data-peca='blindagem' class="controle-ajuste">-</button>
                            <input type="text" class="controle-contador" value="00" data-contador readonly>
                            <button type='button' data-controle='+' data-peca='blindagem' class="controle-ajuste">+</button>
                        </div>
                    </div>
                    <hr class="linha">
                    <div class="peca">
                        <label for="" class="peca-titulo">Núcleos</label>
                        <div class="controle">
                            <button type='button' data-controle='-' data-peca='nucleos' class="controle-ajuste">-</button>
                            <input type="text" class="controle-contador" value="00" data-contador readonly>
                            <button type='button' data-controle='+' data-peca='nucleos' class="controle-ajuste">+</button>
                        </div>
                    </div>
                    <hr class="linha">
                    <div class="peca">
                        <label for="" class="peca-titulo">Pernas</label>
                        <div class="controle">
                            <button type='button' data-controle='-' data-peca='pernas' class="controle-ajuste">-</button>
                            <input type="text" class="controle-contador" value="00" data-contador readonly>
                            <button type='button' data-controle='+' data-peca='pernas' class="controle-ajuste">+</button>
                        </div>
                    </div>
                    <hr class="linha">
                    <div class="peca">
                        <label for="" class="peca-titulo">Foguetes</label>
                        <div class="controle">
                            <button type='button' data-controle='-' data-peca='foguetes' class="controle-ajuste">-</button>
                            <input type="text" class="controle-contador" value="00" data-contador readonly>
                            <button type='button' data-controle='+' data-peca='foguetes' class="controle-ajuste">+</button>
                        </div>
                    </div>
                </div>
                <div class='producao-container'>
                <input type="submit" value="Iniciar produção" class="producao" id="producao">
                <div class='robotron-controle-producao'>
                </div>
                </div>    
            </form>
        </section>
    </main>
    <script>
        const controles = document.querySelectorAll("[data-controle]");
const estatisticas = document.querySelectorAll("[data-estatistica]");

const pecas = {
    "bracos": {
        "forca": 0,
        "poder": 0,
        "energia": 0,
        "velocidade": 0
    },
    "blindagem": {
        "forca": 0,
        "poder": 0,
        "energia": 0,
        "velocidade": 0
    },
    "nucleos": {
        "forca": 0,
        "poder": 0,
        "energia": 0,
        "velocidade": 0
    },
    "pernas": {
        "forca": 0,
        "poder": 0,
        "energia": 0,
        "velocidade": 0
    },
    "foguetes": {
        "forca": 0,
        "poder": 0,
        "energia": 0,
        "velocidade": 0
    }
}

controles.forEach( (elemento) => {
  elemento.addEventListener("click", (evento) => {

    const operacao = evento.currentTarget.dataset.controle;
    const controlePai = evento.currentTarget.parentNode;
    const peca = evento.currentTarget.dataset.peca;

    manipulaDados(operacao, controlePai, peca);
  })
})

function manipulaDados(operacao, controle, peca) {
  const pecaContador = controle.querySelector('[data-contador]');
  let valorAtual = parseInt(pecaContador.value);

if (operacao === '-') {
  
   if (valorAtual > 0) {
    valorAtual = valorAtual - 1;
    pecaContador.value = formatarValor(valorAtual)
    atualizaEstatisticas(peca, '-'); 
  }
} else {

  if (valorAtual < 10) {
    valorAtual = valorAtual + 1;
    pecaContador.value = formatarValor(valorAtual);
    atualizaEstatisticas(peca, '+');
  }
}
  
function atualizaEstatisticas (peca, operacao) {
  estatisticas.forEach( (elemento) => {
    const item = elemento.dataset.estatistica;
    const valorAtual = parseInt(elemento.textContent);
    const valorDaPeca = pecas[peca][item];

    if (operacao === '+') {
      elemento.textContent = valorAtual + valorDaPeca;
    } else {
      elemento.textContent = valorAtual - valorDaPeca;
    }
  } )
}

function formatarValor(valor) {
  if (valor < 10) {
    return '0' + valor;
  }
  return valor;
}  
}


    </script>
</body>
</html>
